webpackJsonp([4],{XlrA:function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=t("Dd8w"),r=t.n(s),i=t("ZxXG"),n=t("NYxO"),l={data:function(){return{nickname:"",sex:"",desc:"",avatarFile:void 0,avatarUrl:""}},computed:r()({},Object(n.e)(["authUserInfo"])),methods:r()({},Object(n.d)(["HIDE_HEADER","SET_USER_INFO"]),{goSubmit:function(){var a=this,e=this.nickname,t=this.desc,s="男"===this.sex?1:0,r=new i.a,n=new FormData;n.append("sex",s),n.append("desc",t),n.append("nickname",e),this.avatarFile&&n.append("avatar",this.avatarFile),r.editUserInfo(n).then(function(e){if(e.data.success){var t=e.data.data,s={nickname:t.nickname,avatar:t.avatar,desc:t.desc,sex:t.sex,created_at:t.created_at,id:t._id};a.SET_USER_INFO(s),a.$message({message:"编辑成功",type:"success"})}else a.$alert(e.data.msg,{type:"error",lockScroll:!1})})},avatarHandler:function(a){a.raw.size>512e3?this.$alert("头像大小超出限制500kb",{type:"warning",lockScroll:!1}):(this.avatarReader.readAsDataURL(a.raw),this.avatarFile=a.raw)},_initAvatarReader:function(){var a=this;this.avatarReader=new FileReader,this.avatarReader.onload=function(e){a.avatarUrl=e.target.result}}}),created:function(){this.nickname=this.authUserInfo.nickname,this.desc=this.authUserInfo.desc,this.sex=1===parseInt(this.authUserInfo.sex)?"男":"女",this.avatarUrl=this.authUserInfo.avatar,this.HIDE_HEADER(!1),this._initAvatarReader()}},c={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("section",{staticClass:"user-edit"},[t("el-form",{attrs:{"label-width":"100px"}},[t("el-form-item",{staticClass:"headline",attrs:{label:"编辑信息："}}),a._v(" "),t("el-form-item",{attrs:{label:"昵称"}},[t("el-input",{model:{value:a.nickname,callback:function(e){a.nickname=e},expression:"nickname"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"性别"}},[t("el-radio-group",{model:{value:a.sex,callback:function(e){a.sex=e},expression:"sex"}},[t("el-radio",{attrs:{label:"男"}}),a._v(" "),t("el-radio",{attrs:{label:"女"}})],1)],1),a._v(" "),t("el-form-item",{attrs:{label:"描述"}},[t("el-input",{model:{value:a.desc,callback:function(e){a.desc=e},expression:"desc"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"头像"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","auto-upload":!1,"show-file-list":!1,"on-change":a.avatarHandler}},[a.avatarUrl?t("img",{staticClass:"avatar",attrs:{src:a.avatarUrl}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a._v(" "),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[a._v("只能上传jpg/png文件，且不超过500kb")])])],1)],1),a._v(" "),t("div",{staticClass:"control-bar"},[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:a.goSubmit}},[a._v("提交")])],1)],1)},staticRenderFns:[]};var o=t("VU/8")(l,c,!1,function(a){t("xcvp")},"data-v-da0a630e",null);e.default=o.exports},xcvp:function(a,e){}});