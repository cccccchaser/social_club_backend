webpackJsonp([5],{k9hK:function(t,a){},y7dX:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("Dd8w"),n=e.n(s),i=e("ZxXG"),c=e("pqu5"),l=e("NYxO"),o=window.localStorage,p={data:function(){return{flag:"login",captchaUrl:"http://localhost:9002/social_captcha",loginData:{account:"",password:"",captcha:""},signUpData:{nickname:"",sex:void 0,account:"",password:"",duplicatePassword:"",captcha:""}}},computed:n()({},Object(l.e)(["hasLogin"])),methods:n()({},Object(l.d)(["HIDE_HEADER","SET_LOGIN","SET_FOLLOWS","SET_FANS","SET_LIKES","SET_MOMENTS","SET_USER_INFO"]),{handleSelect:function(t){this.flag=t,this.changeCaptchaUrl()},changeCaptchaUrl:function(){this.captchaUrl="http://localhost:9002/social_captcha?t="+(new Date).getTime()},goLogin:function(){var t=this,a=this.loginData,e=a.account,s=a.password,n=a.captcha;if(this.$refs.loginInputElem.blur(),e)if(s)if(n){var l=this.$loading();(new i.a).login(e,s,n).then(function(a){if(a.data.success){var e=a.data.data;t.SET_LOGIN(!0),t.SET_FOLLOWS(e.follows_num),t.SET_FANS(e.fans_num),t.SET_LIKES(e.likes_num),t.SET_MOMENTS(e.moments_num),t.SET_USER_INFO({nickname:e.nickname,avatar:e.avatar,desc:e.desc,created_at:e.created_at,sex:e.sex,id:e.id}),o.setItem("userToken",e.token),c.a(),t.$message({message:"登陆成功！",type:"success"}),t.$router.push("/")}else t.$alert(a.data.msg,{type:"error"});l.close()})}else this.$alert("缺少验证码");else this.$alert("密码不能为空");else this.$alert("账号不能为空")},goSignUp:function(){var t=this,a=this.signUpData,e=a.nickname,s=a.sex,n=a.account,c=a.password,l=a.duplicatePassword,p=a.captcha;if(this.$refs.signUpInputElem.blur(),e)if(s)if(n)if(c&&l)if(c===l)if(p){var r="男"===s?1:0,u=this.$loading();(new i.a).signUp(e,r,n,c,p).then(function(a){a.data.success?(o.setItem("userToken",a.data.data.token),u.close(),t.$confirm("注册成功，是否跳转登陆").then(function(){t.$router.push("/")})):t.$alert(a.data.msg,{type:"error"}),u.close()})}else this.$alert("缺少验证码");else this.$alert("两次密码不一样 请重新输入");else this.$alert("密码不能为空");else this.$alert("账号不能为空");else this.$alert("请选择性别");else this.$alert("昵称不能为空")}}),created:function(){this.hasLogin&&this.$router.push("/"),this.HIDE_HEADER(!0)}},r={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"social-entry-page"},[e("router-link",{attrs:{to:"/"}},[e("h1",[t._v("SocialClub")])]),t._v(" "),e("div",{staticClass:"panel"},[e("el-menu",{staticClass:"menu",attrs:{"default-active":"login","active-text-color":"#409eff",mode:"horizontal"},on:{select:t.handleSelect}},[e("el-menu-item",{attrs:{index:"login"}},[t._v("登陆")]),t._v(" "),e("el-menu-item",{attrs:{index:"signUp"}},[t._v("注册")])],1),t._v(" "),"login"===t.flag?e("div",{staticClass:"login-content"},[e("el-input",{staticClass:"inputBox",attrs:{type:"account",placeholder:"请输入你的账号","prefix-icon":"el-icon-tickets",clearable:"",autofocus:""},model:{value:t.loginData.account,callback:function(a){t.$set(t.loginData,"account",a)},expression:"loginData.account"}}),t._v(" "),e("el-input",{ref:"loginInputElem",staticClass:"inputBox",attrs:{type:"password",placeholder:"请输入你的密码","prefix-icon":"el-icon-setting"},model:{value:t.loginData.password,callback:function(a){t.$set(t.loginData,"password",a)},expression:"loginData.password"}}),t._v(" "),e("div",{key:"signUpCaptchaBox",staticClass:"inputBox captcha-box"},[e("el-input",{staticClass:"captcha-el",attrs:{type:"text",placeholder:"验证码","prefix-icon":"el-icon-setting",maxlength:"4"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.goLogin(a)}},model:{value:t.loginData.captcha,callback:function(a){t.$set(t.loginData,"captcha",a)},expression:"loginData.captcha"}}),t._v(" "),e("img",{attrs:{src:t.captchaUrl},on:{click:t.changeCaptchaUrl}})],1),t._v(" "),e("el-button",{staticClass:"panel-btn",attrs:{type:"primary"},on:{click:t.goLogin}},[t._v("登陆")])],1):t._e(),t._v(" "),"signUp"===t.flag?e("div",{staticClass:"signUp-content"},[e("el-input",{staticClass:"inputBox",attrs:{type:"account",placeholder:"请输入昵称","prefix-icon":"el-icon-edit",clearable:"",autofocus:""},model:{value:t.signUpData.nickname,callback:function(a){t.$set(t.signUpData,"nickname",a)},expression:"signUpData.nickname"}}),t._v(" "),e("el-radio-group",{staticClass:"inputBox",model:{value:t.signUpData.sex,callback:function(a){t.$set(t.signUpData,"sex",a)},expression:"signUpData.sex"}},[e("el-radio",{attrs:{label:"男"}}),t._v(" "),e("el-radio",{attrs:{label:"女"}})],1),t._v(" "),e("el-input",{staticClass:"inputBox",attrs:{type:"account",placeholder:"请输入注册账号","prefix-icon":"el-icon-tickets",clearable:""},model:{value:t.signUpData.account,callback:function(a){t.$set(t.signUpData,"account",a)},expression:"signUpData.account"}}),t._v(" "),e("el-input",{staticClass:"inputBox",attrs:{type:"password",placeholder:"请输入注册密码","prefix-icon":"el-icon-setting"},model:{value:t.signUpData.password,callback:function(a){t.$set(t.signUpData,"password",a)},expression:"signUpData.password"}}),t._v(" "),e("el-input",{ref:"signUpInputElem",staticClass:"inputBox",attrs:{type:"password",placeholder:"请再次输入注册密码","prefix-icon":"el-icon-setting"},model:{value:t.signUpData.duplicatePassword,callback:function(a){t.$set(t.signUpData,"duplicatePassword",a)},expression:"signUpData.duplicatePassword"}}),t._v(" "),e("div",{key:"signUpCaptchaBox",staticClass:"inputBox captcha-box"},[e("el-input",{staticClass:"captcha-el",attrs:{type:"text",placeholder:"验证码","prefix-icon":"el-icon-setting",maxlength:"4"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.goSignUp(a)}},model:{value:t.signUpData.captcha,callback:function(a){t.$set(t.signUpData,"captcha",a)},expression:"signUpData.captcha"}}),t._v(" "),e("img",{attrs:{src:t.captchaUrl},on:{click:t.changeCaptchaUrl}})],1),t._v(" "),e("el-button",{staticClass:"panel-btn",attrs:{type:"success"},on:{click:t.goSignUp}},[t._v("注册")])],1):t._e(),t._v(" "),e("div",{staticClass:"panel-footer"})],1)],1)},staticRenderFns:[]};var u=e("VU/8")(p,r,!1,function(t){e("k9hK")},"data-v-c501b1de",null);a.default=u.exports}});